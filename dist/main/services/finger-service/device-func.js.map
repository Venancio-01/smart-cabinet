{"version":3,"sources":["../../../../src/main/services/finger-service/device-func.ts"],"sourcesContent":["import { Library } from 'ffi-napi'\nimport { DeviceArrayType, DeviceTypePointerType, HandleType, UcharType } from './types'\nimport { DEVICE_SDK_PATH } from '@/config'\n\n// 通过 ffi 解析 C++ SDK 方法\nlet deviceSDK = null\n\nexport function initDeviceSDK() {\n  deviceSDK = Library(DEVICE_SDK_PATH, {\n    sensorEnumDevices: ['int', [DeviceArrayType, 'int']], // 枚举设备\n    sensorOpen: [HandleType, [DeviceTypePointerType]], // 打开设备\n    sensorClose: ['int', [HandleType]], // 关闭设备\n    sensorCapture: ['int', [HandleType, UcharType, 'int']], // 采集指纹\n    sensorGetParameter: ['int', [HandleType, 'int']], // 获取指纹仪简单参数\n  })\n}\n\nexport function destroyDeviceSDK() {\n  deviceSDK = null\n}\n\nexport function getDeviceCount(deviceList: unknown[], max: number) {\n  return deviceSDK.sensorEnumDevices(deviceList, max)\n}\n\nexport function openDeviceByHandle(handle: unknown) {\n  return deviceSDK.sensorOpen(handle)\n}\n\nexport function closeDeviceByHandle(handle: unknown) {\n  return deviceSDK.sensorClose(handle)\n}\n\nexport function getParameterByHandle(handle: unknown, type: 1 | 2) {\n  return deviceSDK.sensorGetParameter(handle, type)\n}\n\nexport function captureFingerImage(handle: unknown, imageBuffer: unknown, size: number) {\n  return deviceSDK.sensorCapture(handle, imageBuffer, size)\n}\n"],"names":["initDeviceSDK","destroyDeviceSDK","getDeviceCount","openDeviceByHandle","closeDeviceByHandle","getParameterByHandle","captureFingerImage","deviceSDK","Library","DEVICE_SDK_PATH","sensorEnumDevices","DeviceArrayType","sensorOpen","HandleType","DeviceTypePointerType","sensorClose","sensorCapture","UcharType","sensorGetParameter","deviceList","max","handle","type","imageBuffer","size"],"mappings":";;;;;;;;;;;IAOgBA,aAAa;eAAbA;;IAUAC,gBAAgB;eAAhBA;;IAIAC,cAAc;eAAdA;;IAIAC,kBAAkB;eAAlBA;;IAIAC,mBAAmB;eAAnBA;;IAIAC,oBAAoB;eAApBA;;IAIAC,kBAAkB;eAAlBA;;;uBArCQ;qBACsD;sBAC9C;AAEhC,uBAAuB;AACvB,IAAIC,YAAY;AAET,SAASP;IACdO,YAAYC,IAAAA,kBAAQC,yBAAiB;QACnCC,mBAAmB;YAAC;YAAO;gBAACC;gBAAiB;aAAM;SAAC;QACpDC,YAAY;YAACC;YAAY;gBAACC;aAAsB;SAAC;QACjDC,aAAa;YAAC;YAAO;gBAACF;aAAW;SAAC;QAClCG,eAAe;YAAC;YAAO;gBAACH;gBAAYI;gBAAW;aAAM;SAAC;QACtDC,oBAAoB;YAAC;YAAO;gBAACL;gBAAY;aAAM;SAAC;IAClD;AACF;AAEO,SAASZ;IACdM,YAAY;AACd;AAEO,SAASL,eAAeiB,UAAqB,EAAEC,GAAW;IAC/D,OAAOb,UAAUG,kBAAkBS,YAAYC;AACjD;AAEO,SAASjB,mBAAmBkB,MAAe;IAChD,OAAOd,UAAUK,WAAWS;AAC9B;AAEO,SAASjB,oBAAoBiB,MAAe;IACjD,OAAOd,UAAUQ,YAAYM;AAC/B;AAEO,SAAShB,qBAAqBgB,MAAe,EAAEC,IAAW;IAC/D,OAAOf,UAAUW,mBAAmBG,QAAQC;AAC9C;AAEO,SAAShB,mBAAmBe,MAAe,EAAEE,WAAoB,EAAEC,IAAY;IACpF,OAAOjB,UAAUS,cAAcK,QAAQE,aAAaC;AACtD"}