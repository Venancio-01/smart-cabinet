{"version":3,"sources":["../../../../src/main/services/finger-service/device-func.ts"],"sourcesContent":["import { DEVICE_SDK_PATH } from '@/config'\nimport { DeviceArrayType, DeviceTypePointerType, HandleType, UcharType } from './types'\nimport { Library } from 'ffi-napi'\n\n// 通过 ffi 解析 C++ SDK 方法\nlet deviceSDK = null\n\nexport const initDeviceSDK = () => {\n  deviceSDK = Library(DEVICE_SDK_PATH, {\n    sensorEnumDevices: ['int', [DeviceArrayType, 'int']], // 枚举设备\n    sensorOpen: [HandleType, [DeviceTypePointerType]], // 打开设备\n    sensorClose: ['int', [HandleType]], // 关闭设备\n    sensorCapture: ['int', [HandleType, UcharType, 'int']], // 采集指纹\n    sensorGetParameter: ['int', [HandleType, 'int']] // 获取指纹仪简单参数\n  })\n}\n\nexport const destroyDeviceSDK = () => {\n  deviceSDK = null\n}\n\nexport const getDeviceCount = (deviceList: unknown[], max: number) => {\n  return deviceSDK.sensorEnumDevices(deviceList, max)\n}\n\nexport const openDeviceByHandle = (handle: unknown) => {\n  return deviceSDK.sensorOpen(handle)\n}\n\nexport const closeDeviceByHandle = (handle: unknown) => {\n  return deviceSDK.sensorClose(handle)\n}\n\nexport const getParameterByHandle = (handle: unknown, type: 1 | 2) => {\n  return deviceSDK.sensorGetParameter(handle, type)\n}\n\nexport const captureFingerImage = (handle: unknown, imageBuffer: unknown, size: number) => {\n  return deviceSDK.sensorCapture(handle, imageBuffer, size)\n}\n"],"names":["initDeviceSDK","destroyDeviceSDK","getDeviceCount","openDeviceByHandle","closeDeviceByHandle","getParameterByHandle","captureFingerImage","deviceSDK","Library","DEVICE_SDK_PATH","sensorEnumDevices","DeviceArrayType","sensorOpen","HandleType","DeviceTypePointerType","sensorClose","sensorCapture","UcharType","sensorGetParameter","deviceList","max","handle","type","imageBuffer","size"],"mappings":";;;;;;;;;;;IAOaA,aAAa;eAAbA;;IAUAC,gBAAgB;eAAhBA;;IAIAC,cAAc;eAAdA;;IAIAC,kBAAkB;eAAlBA;;IAIAC,mBAAmB;eAAnBA;;IAIAC,oBAAoB;eAApBA;;IAIAC,kBAAkB;eAAlBA;;;wBArCmB;uBAC8C;yBACtD;AAExB,uBAAuB;AACvB,IAAIC,YAAY;AAET,MAAMP,gBAAgB;IAC3BO,YAAYC,IAAAA,kBAAQC,yBAAiB;QACnCC,mBAAmB;YAAC;YAAO;gBAACC;gBAAiB;aAAM;SAAC;QACpDC,YAAY;YAACC;YAAY;gBAACC;aAAsB;SAAC;QACjDC,aAAa;YAAC;YAAO;gBAACF;aAAW;SAAC;QAClCG,eAAe;YAAC;YAAO;gBAACH;gBAAYI;gBAAW;aAAM;SAAC;QACtDC,oBAAoB;YAAC;YAAO;gBAACL;gBAAY;aAAM;SAAC,CAAC,YAAY;IAC/D;AACF;AAEO,MAAMZ,mBAAmB;IAC9BM,YAAY;AACd;AAEO,MAAML,iBAAiB,CAACiB,YAAuBC;IACpD,OAAOb,UAAUG,kBAAkBS,YAAYC;AACjD;AAEO,MAAMjB,qBAAqB,CAACkB;IACjC,OAAOd,UAAUK,WAAWS;AAC9B;AAEO,MAAMjB,sBAAsB,CAACiB;IAClC,OAAOd,UAAUQ,YAAYM;AAC/B;AAEO,MAAMhB,uBAAuB,CAACgB,QAAiBC;IACpD,OAAOf,UAAUW,mBAAmBG,QAAQC;AAC9C;AAEO,MAAMhB,qBAAqB,CAACe,QAAiBE,aAAsBC;IACxE,OAAOjB,UAAUS,cAAcK,QAAQE,aAAaC;AACtD"}