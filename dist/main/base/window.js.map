{"version":3,"sources":["../../../src/main/base/window.ts"],"sourcesContent":["import { app, BrowserWindow, session, shell } from 'electron'\nimport { join, resolve } from 'path'\nimport { DEVTOOLS_PATH,WINDOW_SIZE } from '@/config'\n\nconst preload = join(__dirname, './preload.js')\nconst url = 'http://localhost:4200/'\nconst indexHtml = join(__dirname, '../../dist/index.html')\n\nexport const createWindow = async () => {\n  const win = new BrowserWindow({\n    ...WINDOW_SIZE,\n    title: '智能载体管控系统',\n    // icon: join(process.env.PUBLIC, 'favicon.ico'),\n    frame: false,\n    webPreferences: {\n      preload,\n      nodeIntegration: true,\n      contextIsolation: true\n    }\n  })\n\n  if (app.isPackaged) {\n    win.loadFile(indexHtml)\n  } else {\n    win.loadURL(url)\n    session.defaultSession.loadExtension(DEVTOOLS_PATH)\n    win.webContents.openDevTools()\n  }\n\n  // Test actively push message to the Electron-Renderer\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', new Date().toLocaleString())\n  })\n\n  // Make all links open with the browser, not with the application\n  win.webContents.setWindowOpenHandler(({ url }) => {\n    if (url.startsWith('https:')) shell.openExternal(url)\n    return { action: 'deny' }\n  })\n\n  return win\n}\n"],"names":["createWindow","preload","join","__dirname","url","indexHtml","win","BrowserWindow","WINDOW_SIZE","title","frame","webPreferences","nodeIntegration","contextIsolation","app","isPackaged","loadFile","loadURL","session","defaultSession","loadExtension","DEVTOOLS_PATH","webContents","openDevTools","on","send","Date","toLocaleString","setWindowOpenHandler","startsWith","shell","openExternal","action"],"mappings":";;;;+BAQaA;;;eAAAA;;;0BARsC;sBACrB;wBACY;AAE1C,MAAMC,UAAUC,IAAAA,YAAKC,WAAW;AAChC,MAAMC,MAAM;AACZ,MAAMC,YAAYH,IAAAA,YAAKC,WAAW;AAE3B,MAAMH,eAAe;IAC1B,MAAMM,MAAM,IAAIC,wBAAc;QAC5B,GAAGC,mBAAW;QACdC,OAAO;QACP,iDAAiD;QACjDC,OAAO;QACPC,gBAAgB;YACdV;YACAW,iBAAiB;YACjBC,kBAAkB;QACpB;IACF;IAEA,IAAIC,cAAIC,YAAY;QAClBT,IAAIU,SAASX;IACf,OAAO;QACLC,IAAIW,QAAQb;QACZc,kBAAQC,eAAeC,cAAcC;QACrCf,IAAIgB,YAAYC;IAClB;IAEA,sDAAsD;IACtDjB,IAAIgB,YAAYE,GAAG,mBAAmB;QACpClB,gBAAAA,iBAAAA,KAAAA,IAAAA,IAAKgB,YAAYG,KAAK,wBAAwB,IAAIC,OAAOC;IAC3D;IAEA,iEAAiE;IACjErB,IAAIgB,YAAYM,qBAAqB,CAAC,EAAExB,IAAG,EAAE;QAC3C,IAAIA,IAAIyB,WAAW,WAAWC,gBAAMC,aAAa3B;QACjD,OAAO;YAAE4B,QAAQ;QAAO;IAC1B;IAEA,OAAO1B;AACT"}