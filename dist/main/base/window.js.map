{"version":3,"sources":["../../../src/main/base/window.ts"],"sourcesContent":["import { join } from 'path'\nimport { BrowserWindow, app, session, shell } from 'electron'\nimport { DEVTOOLS_PATH, WINDOW_SIZE } from '@/config'\n\nconst preload = join(__dirname, './preload.js')\nconst url = 'http://localhost:4200/'\nconst indexHtml = join(__dirname, '../../renderer/index.html')\n\nexport async function createWindow() {\n  const win = new BrowserWindow({\n    ...WINDOW_SIZE,\n    title: '智能载体管控系统',\n    // icon: join(process.env.PUBLIC, 'favicon.ico'),\n    frame: false,\n    webPreferences: {\n      preload,\n      nodeIntegration: true,\n      contextIsolation: true,\n    },\n  })\n\n  if (app.isPackaged) {\n    win.loadFile(indexHtml)\n  }\n  else {\n    win.loadURL(url)\n    session.defaultSession.loadExtension(DEVTOOLS_PATH)\n    win.webContents.openDevTools()\n  }\n\n  // Test actively push message to the Electron-Renderer\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', new Date().toLocaleString())\n  })\n\n  // Make all links open with the browser, not with the application\n  win.webContents.setWindowOpenHandler(({ url }) => {\n    if (url.startsWith('https:'))\n      shell.openExternal(url)\n    return { action: 'deny' }\n  })\n\n  return win\n}\n"],"names":["createWindow","preload","join","__dirname","url","indexHtml","win","BrowserWindow","WINDOW_SIZE","title","frame","webPreferences","nodeIntegration","contextIsolation","app","isPackaged","loadFile","loadURL","session","defaultSession","loadExtension","DEVTOOLS_PATH","webContents","openDevTools","on","send","Date","toLocaleString","setWindowOpenHandler","startsWith","shell","openExternal","action"],"mappings":";;;;+BAQsBA;;;eAAAA;;;oBARD;wBAC8B;sBACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE3C,IAAMC,UAAUC,IAAAA,YAAKC,WAAW;AAChC,IAAMC,MAAM;AACZ,IAAMC,YAAYH,IAAAA,YAAKC,WAAW;SAEZH;WAAAA;;SAAAA;IAAAA,gBAAf,oBAAA;YACCM;;YAAAA,MAAM,IAAIC,wBAAc,wCACzBC;gBACHC,OAAO;gBACP,iDAAiD;gBACjDC,OAAO;gBACPC,gBAAgB;oBACdV,SAAAA;oBACAW,iBAAiB;oBACjBC,kBAAkB;gBACpB;;YAGF,IAAIC,cAAIC,YAAY;gBAClBT,IAAIU,SAASX;YACf,OACK;gBACHC,IAAIW,QAAQb;gBACZc,kBAAQC,eAAeC,cAAcC;gBACrCf,IAAIgB,YAAYC;YAClB;YAEA,sDAAsD;YACtDjB,IAAIgB,YAAYE,GAAG,mBAAmB;gBACpClB,gBAAAA,iBAAAA,KAAAA,IAAAA,IAAKgB,YAAYG,KAAK,wBAAwB,IAAIC,OAAOC;YAC3D;YAEA,iEAAiE;YACjErB,IAAIgB,YAAYM,qBAAqB;oBAAGxB,YAAAA;gBACtC,IAAIA,IAAIyB,WAAW,WACjBC,gBAAMC,aAAa3B;gBACrB,OAAO;oBAAE4B,QAAQ;gBAAO;YAC1B;YAEA;;gBAAO1B;;;IACT;WAnCsBN"}