{"version":3,"sources":["../../../src/main/base/loading.ts"],"sourcesContent":["function domReady(\n  condition: DocumentReadyState[] = ['complete', 'interactive']\n) {\n  return new Promise((resolve) => {\n    if (condition.includes(document.readyState)) {\n      resolve(true);\n    } else {\n      document.addEventListener('readystatechange', () => {\n        if (condition.includes(document.readyState)) {\n          resolve(true);\n        }\n      });\n    }\n  });\n}\n\nconst safeDOM = {\n  append(parent: HTMLElement, child: HTMLElement) {\n    if (!Array.from(parent.children).find((e) => e === child)) {\n      return parent.appendChild(child);\n    }\n  },\n  remove(parent: HTMLElement, child: HTMLElement) {\n    if (Array.from(parent.children).find((e) => e === child)) {\n      return parent.removeChild(child);\n    }\n  },\n};\n\n/**\n * https://tobiasahlin.com/spinkit\n * https://connoratherton.com/loaders\n * https://projects.lukehaas.me/css-loaders\n * https://matejkustec.github.io/SpinThatShit\n */\nfunction useLoading() {\n  const className = `loaders-css__square-spin`;\n  const styleContent = `\n@keyframes square-spin {\n  25% { transform: perspective(100px) rotateX(180deg) rotateY(0); }\n  50% { transform: perspective(100px) rotateX(180deg) rotateY(180deg); }\n  75% { transform: perspective(100px) rotateX(0) rotateY(180deg); }\n  100% { transform: perspective(100px) rotateX(0) rotateY(0); }\n}\n.${className} > div {\n  animation-fill-mode: both;\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  animation: square-spin 3s 0s cubic-bezier(0.09, 0.57, 0.49, 0.9) infinite;\n}\n.app-loading-wrap {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #282c34;\n  z-index: 9;\n}\n    `;\n  const oStyle = document.createElement('style');\n  const oDiv = document.createElement('div');\n\n  oStyle.id = 'app-loading-style';\n  oStyle.innerHTML = styleContent;\n  oDiv.className = 'app-loading-wrap';\n  oDiv.innerHTML = `<div class=\"${className}\"><div></div></div>`;\n\n  return {\n    appendLoading() {\n      safeDOM.append(document.head, oStyle);\n      safeDOM.append(document.body, oDiv);\n    },\n    removeLoading() {\n      safeDOM.remove(document.head, oStyle);\n      safeDOM.remove(document.body, oDiv);\n    },\n  };\n}\n\n// ----------------------------------------------------------------------\n\nconst { appendLoading, removeLoading } = useLoading();\ndomReady().then(appendLoading);\n\nwindow.onmessage = (ev) => {\n  ev.data.payload === 'removeLoading' && removeLoading();\n};\n\nsetTimeout(removeLoading, 4999);\n"],"names":["domReady","condition","Promise","resolve","includes","document","readyState","addEventListener","safeDOM","append","parent","child","Array","from","children","find","e","appendChild","remove","removeChild","useLoading","className","styleContent","oStyle","createElement","oDiv","id","innerHTML","appendLoading","head","body","removeLoading","then","window","onmessage","ev","data","payload","setTimeout"],"mappings":";AAAA,SAASA,SACPC,YAAkC;IAAC;IAAY;CAAc;IAE7D,OAAO,IAAIC,QAAQ,CAACC;QAClB,IAAIF,UAAUG,SAASC,SAASC,aAAa;YAC3CH,QAAQ;QACV,OAAO;YACLE,SAASE,iBAAiB,oBAAoB;gBAC5C,IAAIN,UAAUG,SAASC,SAASC,aAAa;oBAC3CH,QAAQ;gBACV;YACF;QACF;IACF;AACF;AAEA,MAAMK,UAAU;IACdC,QAAOC,MAAmB,EAAEC,KAAkB;QAC5C,IAAI,CAACC,MAAMC,KAAKH,OAAOI,UAAUC,KAAK,CAACC,IAAMA,MAAML,QAAQ;YACzD,OAAOD,OAAOO,YAAYN;QAC5B;IACF;IACAO,QAAOR,MAAmB,EAAEC,KAAkB;QAC5C,IAAIC,MAAMC,KAAKH,OAAOI,UAAUC,KAAK,CAACC,IAAMA,MAAML,QAAQ;YACxD,OAAOD,OAAOS,YAAYR;QAC5B;IACF;AACF;AAEA;;;;;CAKC,GACD,SAASS;IACP,MAAMC,YAAY,CAAC,wBAAwB,CAAC;IAC5C,MAAMC,eAAe,CAAC;;;;;;;CAOvB,EAAED,UAAU;;;;;;;;;;;;;;;;;;;IAmBT,CAAC;IACH,MAAME,SAASlB,SAASmB,cAAc;IACtC,MAAMC,OAAOpB,SAASmB,cAAc;IAEpCD,OAAOG,KAAK;IACZH,OAAOI,YAAYL;IACnBG,KAAKJ,YAAY;IACjBI,KAAKE,YAAY,CAAC,YAAY,EAAEN,UAAU,mBAAmB,CAAC;IAE9D,OAAO;QACLO;YACEpB,QAAQC,OAAOJ,SAASwB,MAAMN;YAC9Bf,QAAQC,OAAOJ,SAASyB,MAAML;QAChC;QACAM;YACEvB,QAAQU,OAAOb,SAASwB,MAAMN;YAC9Bf,QAAQU,OAAOb,SAASyB,MAAML;QAChC;IACF;AACF;AAEA,yEAAyE;AAEzE,MAAM,EAAEG,cAAa,EAAEG,cAAa,EAAE,GAAGX;AACzCpB,WAAWgC,KAAKJ;AAEhBK,OAAOC,YAAY,CAACC;IAClBA,GAAGC,KAAKC,YAAY,mBAAmBN;AACzC;AAEAO,WAAWP,eAAe"}