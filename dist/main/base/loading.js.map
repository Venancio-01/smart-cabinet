{"version":3,"sources":["../../../src/main/base/loading.ts"],"sourcesContent":["function domReady(\n  condition: DocumentReadyState[] = ['complete', 'interactive'],\n) {\n  return new Promise((resolve) => {\n    if (condition.includes(document.readyState)) {\n      resolve(true)\n    }\n    else {\n      document.addEventListener('readystatechange', () => {\n        if (condition.includes(document.readyState))\n          resolve(true)\n      })\n    }\n  })\n}\n\nconst safeDOM = {\n  append(parent: HTMLElement, child: HTMLElement) {\n    if (!Array.from(parent.children).find(e => e === child))\n      return parent.appendChild(child)\n  },\n  remove(parent: HTMLElement, child: HTMLElement) {\n    if (Array.from(parent.children).find(e => e === child))\n      return parent.removeChild(child)\n  },\n}\n\n/**\n * https://tobiasahlin.com/spinkit\n * https://connoratherton.com/loaders\n * https://projects.lukehaas.me/css-loaders\n * https://matejkustec.github.io/SpinThatShit\n */\nfunction useLoading() {\n  const className = 'loaders-css__square-spin'\n  const styleContent = `\n@keyframes square-spin {\n  25% { transform: perspective(100px) rotateX(180deg) rotateY(0); }\n  50% { transform: perspective(100px) rotateX(180deg) rotateY(180deg); }\n  75% { transform: perspective(100px) rotateX(0) rotateY(180deg); }\n  100% { transform: perspective(100px) rotateX(0) rotateY(0); }\n}\n.${className} > div {\n  animation-fill-mode: both;\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  animation: square-spin 3s 0s cubic-bezier(0.09, 0.57, 0.49, 0.9) infinite;\n}\n.app-loading-wrap {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #282c34;\n  z-index: 9;\n}\n    `\n  const oStyle = document.createElement('style')\n  const oDiv = document.createElement('div')\n\n  oStyle.id = 'app-loading-style'\n  oStyle.innerHTML = styleContent\n  oDiv.className = 'app-loading-wrap'\n  oDiv.innerHTML = `<div class=\"${className}\"><div></div></div>`\n\n  return {\n    appendLoading() {\n      safeDOM.append(document.head, oStyle)\n      safeDOM.append(document.body, oDiv)\n    },\n    removeLoading() {\n      safeDOM.remove(document.head, oStyle)\n      safeDOM.remove(document.body, oDiv)\n    },\n  }\n}\n\n// ----------------------------------------------------------------------\n\nconst { appendLoading, removeLoading } = useLoading()\ndomReady().then(appendLoading)\n\nwindow.onmessage = (ev) => {\n  ev.data.payload === 'removeLoading' && removeLoading()\n}\n\nsetTimeout(removeLoading, 4999)\n"],"names":["domReady","condition","Promise","resolve","includes","document","readyState","addEventListener","safeDOM","append","parent","child","Array","from","children","find","e","appendChild","remove","removeChild","useLoading","className","styleContent","oStyle","createElement","oDiv","id","innerHTML","appendLoading","head","body","removeLoading","then","window","onmessage","ev","data","payload","setTimeout"],"mappings":";AAAA,SAASA;QACPC,YAAAA,iEAAkC;QAAC;QAAY;KAAc;IAE7D,OAAO,IAAIC,QAAQ,SAACC;QAClB,IAAIF,UAAUG,SAASC,SAASC,aAAa;YAC3CH,QAAQ;QACV,OACK;YACHE,SAASE,iBAAiB,oBAAoB;gBAC5C,IAAIN,UAAUG,SAASC,SAASC,aAC9BH,QAAQ;YACZ;QACF;IACF;AACF;AAEA,IAAMK,UAAU;IACdC,QAAAA,SAAAA,OAAOC,MAAmB,EAAEC,KAAkB;QAC5C,IAAI,CAACC,MAAMC,KAAKH,OAAOI,UAAUC,KAAKC,SAAAA;mBAAKA,MAAML;YAC/C,OAAOD,OAAOO,YAAYN;IAC9B;IACAO,QAAAA,SAAAA,OAAOR,MAAmB,EAAEC,KAAkB;QAC5C,IAAIC,MAAMC,KAAKH,OAAOI,UAAUC,KAAKC,SAAAA;mBAAKA,MAAML;YAC9C,OAAOD,OAAOS,YAAYR;IAC9B;AACF;AAEA;;;;;CAKC,GACD,SAASS;IACP,IAAMC,YAAY;IAClB,IAAMC,eAAe,AAAC,wTAOX,OAAVD,WAAU;IAoBX,IAAME,SAASlB,SAASmB,cAAc;IACtC,IAAMC,OAAOpB,SAASmB,cAAc;IAEpCD,OAAOG,KAAK;IACZH,OAAOI,YAAYL;IACnBG,KAAKJ,YAAY;IACjBI,KAAKE,YAAY,AAAC,eAAwB,OAAVN,WAAU;IAE1C,OAAO;QACLO,eAAAA,SAAAA;YACEpB,QAAQC,OAAOJ,SAASwB,MAAMN;YAC9Bf,QAAQC,OAAOJ,SAASyB,MAAML;QAChC;QACAM,eAAAA,SAAAA;YACEvB,QAAQU,OAAOb,SAASwB,MAAMN;YAC9Bf,QAAQU,OAAOb,SAASyB,MAAML;QAChC;IACF;AACF;AAEA,yEAAyE;AAEzE,IAAyCL,cAAAA,cAAjCQ,gBAAiCR,YAAjCQ,eAAeG,gBAAkBX,YAAlBW;AACvB/B,WAAWgC,KAAKJ;AAEhBK,OAAOC,YAAY,SAACC;IAClBA,GAAGC,KAAKC,YAAY,mBAAmBN;AACzC;AAEAO,WAAWP,eAAe"}