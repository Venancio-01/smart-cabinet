{"version":3,"sources":["../../../src/main/utils/message.ts"],"sourcesContent":["export interface Message {\n  name: string\n  content: string\n  time: number\n}\n\ninterface Listener<T extends any[]> {\n  eventName: string\n  callback: (...args: T) => void\n}\n\nexport class MessageQueue {\n  private messages: Message[] = [] // 存储消息队列\n  private maxLength = 800 // 消息队列上限\n  private listeners: Listener<any>[] = [] // 事件监听器列表\n\n  // 添加消息到队列中\n  push(message: Message): void {\n    if (this.messages.length >= this.maxLength) {\n      // 消息队列已满，删除最早的一些消息\n      this.messages.splice(0, 100)\n    }\n\n    this.messages.push(message)\n\n    // 触发 push 事件，调用所有相关的事件监听器\n    this.emit('push', message, this.messages)\n  }\n\n  // 根据名称获取队列中的消息\n  getMessages(name: string): Message[] {\n    return this.messages.filter(item => item.name === name)\n  }\n\n  // 获取队列中的所有消息\n  getAllMessages(): Message[] {\n    return this.messages\n  }\n\n  clear(): void {\n    this.messages = []\n  }\n\n  // 添加事件监听器\n  on<T extends any[]>(eventName: string, callback: (...args: T) => void): void {\n    this.listeners.push({ eventName, callback })\n  }\n\n  // 触发事件\n  emit<T extends any[]>(eventName: string, ...args: T): void {\n    for (const listener of this.listeners) {\n      if (listener.eventName === eventName)\n        listener.callback(...args)\n    }\n  }\n}\n"],"names":["MessageQueue","messages","maxLength","listeners","push","message","length","splice","emit","getMessages","name","filter","item","getAllMessages","clear","on","eventName","callback","args","listener"],"mappings":";;;;+BAWaA;;;eAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAN,IAAA,AAAMA,6BAAN;;aAAMA;gCAAAA;QACX,uBAAQC,YAAsB,EAAE,CAAC,SAAS;;QAC1C,uBAAQC,aAAY,IAAI,SAAS;;QACjC,uBAAQC,aAA6B,EAAE,CAAC,UAAU;;;kBAHvCH;;YAKX,WAAW;YACXI,KAAAA;mBAAAA,SAAAA,KAAKC,OAAgB;gBACnB,IAAI,IAAI,CAACJ,SAASK,UAAU,IAAI,CAACJ,WAAW;oBAC1C,mBAAmB;oBACnB,IAAI,CAACD,SAASM,OAAO,GAAG;gBAC1B;gBAEA,IAAI,CAACN,SAASG,KAAKC;gBAEnB,0BAA0B;gBAC1B,IAAI,CAACG,KAAK,QAAQH,SAAS,IAAI,CAACJ;YAClC;;;YAEA,eAAe;YACfQ,KAAAA;mBAAAA,SAAAA,YAAYC,IAAY;gBACtB,OAAO,IAAI,CAACT,SAASU,OAAOC,SAAAA;2BAAQA,KAAKF,SAASA;;YACpD;;;YAEA,aAAa;YACbG,KAAAA;mBAAAA,SAAAA;gBACE,OAAO,IAAI,CAACZ;YACd;;;YAEAa,KAAAA;mBAAAA,SAAAA;gBACE,IAAI,CAACb,WAAW,EAAE;YACpB;;;YAEA,UAAU;YACVc,KAAAA;mBAAAA,SAAAA,GAAoBC,SAAiB,EAAEC,QAA8B;gBACnE,IAAI,CAACd,UAAUC,KAAK;oBAAEY,WAAAA;oBAAWC,UAAAA;gBAAS;YAC5C;;;YAEA,OAAO;YACPT,KAAAA;mBAAAA,SAAAA,KAAsBQ,SAAiB;gBAAE,IAAA,IAAA,OAAA,UAAA,QAAA,AAAGE,OAAH,UAAA,OAAA,IAAA,OAAA,QAAA,OAAA,GAAA,OAAA,MAAA,OAAA;oBAAGA,KAAH,OAAA,KAAA,SAAA,CAAA,KAAU;gBAAD;oBAC3C,kCAAA,2BAAA;;oBAAL,QAAK,YAAkB,IAAI,CAACf,8BAAvB,SAAA,6BAAA,QAAA,yBAAA,iCAAkC;wBAAlC,IAAMgB,WAAN;4BAEDA;wBADF,IAAIA,SAASH,cAAcA,WACzBG,CAAAA,YAAAA,UAASF,SAATE,MAAAA,WAAkB,qBAAGD;oBACzB;;oBAHK;oBAAA;;;6BAAA,6BAAA;4BAAA;;;4BAAA;kCAAA;;;;YAIP;;;WA3CWlB"}