{"version":3,"sources":["../../../src/main/database/index.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nlet prisma: PrismaClient | null = null\nlet connected = false\n\nasync function connectToDatabase() {\n  if (!prisma) {\n    try {\n      prisma = new PrismaClient()\n      await prisma.$connect()\n      connected = true\n    }\n    catch (e) {\n      console.log(e, '数据库连接失败')\n      connected = false\n    }\n  }\n}\n\nasync function disconnectFromDatabase() {\n  if (prisma && connected) {\n    await prisma.$disconnect()\n    prisma = null\n    connected = false\n  }\n}\n\nconnectToDatabase()\n\nexport { connectToDatabase, disconnectFromDatabase, prisma, connected }\n"],"names":["connectToDatabase","disconnectFromDatabase","prisma","connected","e","PrismaClient","$connect","console","log","$disconnect"],"mappings":";;;;;;;;;;;IA6BSA,iBAAiB;eAAjBA;;IAAmBC,sBAAsB;eAAtBA;;IAAwBC,MAAM;eAANA;;IAAQC,SAAS;eAATA;;;sBA7B/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE7B,IAAID,SAA8B;AAClC,IAAIC,YAAY;SAEDH;WAAAA;;SAAAA;IAAAA,qBAAf,oBAAA;YAOWI;;;;yBANL,CAACF,QAAD;;;;;;;;;;;;oBAEAA,SAAS,IAAIG;oBACb;;wBAAMH,OAAOI;;;oBAAb;oBACAH,YAAY;;;;;;oBAEPC;oBACLG,QAAQC,IAAIJ,GAAG;oBACfD,YAAY;;;;;;;;;;;IAGlB;WAZeH;;SAcAC;WAAAA;;SAAAA;IAAAA,0BAAf,oBAAA;;;;yBACMC,CAAAA,UAAUC,SAAQ,GAAlBD;;;;oBACF;;wBAAMA,OAAOO;;;oBAAb;oBACAP,SAAS;oBACTC,YAAY;;;;;;;;IAEhB;WANeF;;AAQfD"}